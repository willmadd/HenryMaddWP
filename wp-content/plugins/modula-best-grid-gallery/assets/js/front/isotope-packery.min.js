!function(t){t.Packery=t.Packery||{},t.Packery.Rect=function(){function a(t){for(var i in a.defaults){this[i]=a.defaults[i]}for(i in t){this[i]=t[i]}}a.defaults={x:0,y:0,width:0,height:0};var t=a.prototype;return t.contains=function(t){var i=t.width||0,e=t.height||0;return this.x<=t.x&&this.y<=t.y&&this.x+this.width>=t.x+i&&this.y+this.height>=t.y+e},t.overlaps=function(t){var i=this.x+this.width,e=this.y+this.height,s=t.x+t.width,r=t.y+t.height;return this.x<s&&i>t.x&&this.y<r&&e>t.y},t.getMaximalFreeRects=function(t){if(!this.overlaps(t))return!1;var i,e=[],s=this.x+this.width,r=this.y+this.height,h=t.x+t.width,n=t.y+t.height;return this.y<t.y&&(i=new a({x:this.x,y:this.y,width:this.width,height:t.y-this.y}),e.push(i)),h<s&&(i=new a({x:h,y:this.y,width:s-h,height:this.height}),e.push(i)),n<r&&(i=new a({x:this.x,y:n,width:this.width,height:r-n}),e.push(i)),this.x<t.x&&(i=new a({x:this.x,y:this.y,width:t.x-this.x,height:this.height}),e.push(i)),e},t.canFit=function(t){return this.width>=t.width&&this.height>=t.height},a}()}(window),function(t){var i=t.Packery=t.Packery||{};i.Packer=function(i){function t(t,i,e){this.width=t||0;this.height=i||0;this.sortDirection=e||"downwardLeftToRight";this.reset()}var e=t.prototype;e.reset=function(){this.spaces=[];var t=new i({x:0,y:0,width:this.width,height:this.height});this.spaces.push(t);this.sorter=s[this.sortDirection]||s.downwardLeftToRight},e.pack=function(t){for(var i=0;i<this.spaces.length;i++){var e=this.spaces[i];if(e.canFit(t)){this.placeInSpace(t,e);break}}},e.columnPack=function(t){for(var i=0;i<this.spaces.length;i++){var e=this.spaces[i];var s=e.x<=t.x&&e.x+e.width>=t.x+t.width&&e.height>=t.height-.01;if(s){t.y=e.y;this.placed(t);break}}},e.rowPack=function(t){for(var i=0;i<this.spaces.length;i++){var e=this.spaces[i];var s=e.y<=t.y&&e.y+e.height>=t.y+t.height&&e.width>=t.width-.01;if(s){t.x=e.x;this.placed(t);break}}},e.placeInSpace=function(t,i){t.x=i.x;t.y=i.y;this.placed(t)},e.placed=function(t){var i=[];for(var e=0;e<this.spaces.length;e++){var s=this.spaces[e];var r=s.getMaximalFreeRects(t);if(r){i.push.apply(i,r)}else{i.push(s)}}this.spaces=i;this.mergeSortSpaces()},e.mergeSortSpaces=function(){t.mergeRects(this.spaces);this.spaces.sort(this.sorter)},e.addSpace=function(t){this.spaces.push(t);this.mergeSortSpaces()},t.mergeRects=function(t){var i=0;var e=t[i];t:while(e){var s=0;var r=t[i+s];while(r){if(r==e){s++}else if(r.contains(e)){t.splice(i,1);e=t[i];continue t}else if(e.contains(r)){t.splice(i+s,1)}else{s++}r=t[i+s]}i++;e=t[i]}return t};var s={downwardLeftToRight:function(t,i){return t.y-i.y||t.x-i.x},rightwardTopToBottom:function(t,i){return t.x-i.x||t.y-i.y}};return t}(i.Rect)}(window),function(t){t.Packery.Item=function(i,t){var e,s=typeof document.documentElement.style.transform=="string"?"transform":"WebkitTransform",r=function t(){i.Item.apply(this,arguments)},h=r.prototype=Object.create(i.Item.prototype),n=h._create;h._create=function(){n.call(this);this.rect=new t};var a=h.moveTo;return h.moveTo=function(t,i){var e=Math.abs(this.position.x-t),s=Math.abs(this.position.y-i);this.layout.dragItemCount&&!this.isPlacing&&!this.isTransitioning&&e<1&&s<1?this.goTo(t,i):a.apply(this,arguments)},h.enablePlacing=function(){this.removeTransitionStyles(),this.isTransitioning&&s&&(this.element.style[s]="none"),this.isTransitioning=!1,this.getSize(),this.layout._setRectSize(this.element,this.rect),this.isPlacing=!0},h.disablePlacing=function(){this.isPlacing=!1},h.removeElem=function(){this.element.parentNode.removeChild(this.element),this.layout.packer.addSpace(this.rect),this.emitEvent("remove",[this])},h.showDropPlaceholder=function(){var t=this.dropPlaceholder;t||((t=this.dropPlaceholder=document.createElement("div")).className="packery-drop-placeholder",t.style.position="absolute"),t.style.width=this.size.width+"px",t.style.height=this.size.height+"px",this.positionDropPlaceholder(),this.layout.element.appendChild(t)},h.positionDropPlaceholder=function(){this.dropPlaceholder.style[s]="translate("+this.rect.x+"px, "+this.rect.y+"px)"},h.hideDropPlaceholder=function(){this.layout.element.removeChild(this.dropPlaceholder)},r}(t.Outlayer,t.Packery.Rect)}(window),function(t){t.Packery=function(u,t,f,i,e){f.prototype.canFit=function(t){return this.width>=t.width-1&&this.height>=t.height-1};var s=t.create("packery");s.Item=e;var r=s.prototype;function h(t,i){return t.position.y-i.position.y||t.position.x-i.position.x}function n(t,i){return t.position.x-i.position.x||t.position.y-i.position.y}function a(t,i){var e=i.x-t.x;var s=i.y-t.y;return Math.sqrt(e*e+s*s)}r._create=function(){t.prototype._create.call(this);this.packer=new i;this.shiftPacker=new i;this.isEnabled=true;this.dragItemCount=0;var s=this;this.handleDraggabilly={dragStart:function(){s.itemDragStart(this.element)},dragMove:function(){s.itemDragMove(this.element,this.position.x,this.position.y)},dragEnd:function(){s.itemDragEnd(this.element)}};this.handleUIDraggable={start:function t(i,e){if(!e){return}s.itemDragStart(i.currentTarget)},drag:function t(i,e){if(!e){return}s.itemDragMove(i.currentTarget,e.position.left,e.position.top)},stop:function t(i,e){if(!e){return}s.itemDragEnd(i.currentTarget)}}},r._resetLayout=function(){this.getSize();this._getMeasurements();var t,i,e;if(this._getOption("horizontal")){t=Infinity;i=this.size.innerHeight+this.gutter;e="rightwardTopToBottom"}else{t=this.size.innerWidth+this.gutter;i=Infinity;e="downwardLeftToRight"}this.packer.width=this.shiftPacker.width=t;this.packer.height=this.shiftPacker.height=i;this.packer.sortDirection=this.shiftPacker.sortDirection=e;this.packer.reset();this.maxY=0;this.maxX=0},r._getMeasurements=function(){this._getMeasurement("columnWidth","width");this._getMeasurement("rowHeight","height");this._getMeasurement("gutter","width")},r._getItemLayoutPosition=function(t){this._setRectSize(t.element,t.rect);if(this.isShifting||this.dragItemCount>0){var i=this._getPackMethod();this.packer[i](t.rect)}else{this.packer.pack(t.rect)}this._setMaxXY(t.rect);return t.rect},r.shiftLayout=function(){this.isShifting=true;this.layout();delete this.isShifting},r._getPackMethod=function(){return this._getOption("horizontal")?"rowPack":"columnPack"},r._setMaxXY=function(t){this.maxX=Math.max(t.x+t.width,this.maxX);this.maxY=Math.max(t.y+t.height,this.maxY)},r._setRectSize=function(t,i){var e=u(t);var s=e.outerWidth;var r=e.outerHeight;if(s||r){s=this._applyGridGutter(s,this.columnWidth);r=this._applyGridGutter(r,this.rowHeight)}i.width=Math.min(s,this.packer.width);i.height=Math.min(r,this.packer.height)},r._applyGridGutter=function(t,i){if(!i){return t+this.gutter}i+=this.gutter;var e=t%i;var s=e&&e<1?"round":"ceil";t=Math[s](t/i)*i;return t},r._getContainerSize=function(){if(this._getOption("horizontal")){return{width:this.maxX-this.gutter}}else{return{height:this.maxY-this.gutter}}},r._manageStamp=function(t){var i=this.getItem(t);var e;if(i&&i.isPlacing){e=i.rect}else{var s=this._getElementOffset(t);e=new f({x:this._getOption("originLeft")?s.left:s.right,y:this._getOption("originTop")?s.top:s.bottom})}this._setRectSize(t,e);this.packer.placed(e);this._setMaxXY(e)},r.sortItemsByPosition=function(){var t=this._getOption("horizontal")?n:h;this.items.sort(t)},r.fit=function(t,i,e){var s=this.getItem(t);if(!s){return}this.stamp(s.element);s.enablePlacing();this.updateShiftTargets(s);i=i===undefined?s.rect.x:i;e=e===undefined?s.rect.y:e;this.shift(s,i,e);this._bindFitEvents(s);s.moveTo(s.rect.x,s.rect.y);this.shiftLayout();this.unstamp(s.element);this.sortItemsByPosition();s.disablePlacing()},r._bindFitEvents=function(t){var i=this;var e=0;function s(){e++;if(e!=2){return}i.dispatchEvent("fitComplete",null,[t])}t.once("layout",s);this.once("layoutComplete",s)},r.resize=function(){if(!this.isResizeBound||!this.needsResizeLayout()){return}if(this.options.shiftPercentResize){this.resizeShiftPercentLayout()}else{this.layout()}},r.needsResizeLayout=function(){var t=u(this.element);var i=this._getOption("horizontal")?"innerHeight":"innerWidth";return t[i]!=this.size[i]},r.resizeShiftPercentLayout=function(){var t=this._getItemsForLayout(this.items);var i=this._getOption("horizontal");var e=i?"y":"x";var s=i?"height":"width";var r=i?"rowHeight":"columnWidth";var h=i?"innerHeight":"innerWidth";var n=this[r];n=n&&n+this.gutter;if(n){this._getMeasurements();var a=this[r]+this.gutter;t.forEach(function(t){var i=Math.round(t.rect[e]/n);t.rect[e]=i*a})}else{var o=u(this.element)[h]+this.gutter;var c=this.packer[s];t.forEach(function(t){t.rect[e]=t.rect[e]/c*o})}this.shiftLayout()},r.itemDragStart=function(t){if(!this.isEnabled){return}this.stamp(t);var i=this.getItem(t);if(!i){return}i.enablePlacing();i.showDropPlaceholder();this.dragItemCount++;this.updateShiftTargets(i)},r.updateShiftTargets=function(t){this.shiftPacker.reset();this._getBoundingRect();var r=this._getOption("originLeft");var h=this._getOption("originTop");this.stamps.forEach(function(t){var i=this.getItem(t);if(i&&i.isPlacing){return}var e=this._getElementOffset(t);var s=new f({x:r?e.left:e.right,y:h?e.top:e.bottom});this._setRectSize(t,s);this.shiftPacker.placed(s)},this);var o=this._getOption("horizontal");var i=o?"rowHeight":"columnWidth";var c=o?"height":"width";this.shiftTargetKeys=[];this.shiftTargets=[];var u;var g=this[i];g=g&&g+this.gutter;if(g){var e=Math.ceil(t.rect[c]/g);var s=Math.floor((this.shiftPacker[c]+this.gutter)/g);u=(s-e)*g;for(var n=0;n<s;n++){this._addShiftTarget(n*g,0,u)}}else{u=this.shiftPacker[c]+this.gutter-t.rect[c];this._addShiftTarget(0,0,u)}var a=this._getItemsForLayout(this.items);var l=this._getPackMethod();a.forEach(function(t){var i=t.rect;this._setRectSize(t.element,i);this.shiftPacker[l](i);this._addShiftTarget(i.x,i.y,u);var e=o?i.x+i.width:i.x;var s=o?i.y:i.y+i.height;this._addShiftTarget(e,s,u);if(g){var r=Math.round(i[c]/g);for(var h=1;h<r;h++){var n=o?e:i.x+g*h;var a=o?i.y+g*h:s;this._addShiftTarget(n,a,u)}}},this)},r._addShiftTarget=function(t,i,e){var s=this._getOption("horizontal")?i:t;if(s!==0&&s>e){return}var r=t+","+i;var h=this.shiftTargetKeys.indexOf(r)!=-1;if(h){return}this.shiftTargetKeys.push(r);this.shiftTargets.push({x:t,y:i})},r.shift=function(t,i,e){var s;var r=Infinity;var h={x:i,y:e};this.shiftTargets.forEach(function(t){var i=a(t,h);if(i<r){s=t;r=i}});t.rect.x=s.x;t.rect.y=s.y};var o=120;r.itemDragMove=function(t,i,e){var s=this.isEnabled&&this.getItem(t);if(!s){return}i-=this.size.paddingLeft;e-=this.size.paddingTop;var r=this;function h(){r.shift(s,i,e);s.positionDropPlaceholder();r.layout()}var n=new Date;if(this._itemDragTime&&n-this._itemDragTime<o){clearTimeout(this.dragTimeout);this.dragTimeout=setTimeout(h,o)}else{h();this._itemDragTime=n}},r.itemDragEnd=function(t){var i=this.isEnabled&&this.getItem(t);if(!i){return}clearTimeout(this.dragTimeout);i.element.classList.add("is-positioning-post-drag");var e=0;var s=this;function r(){e++;if(e!=2){return}i.element.classList.remove("is-positioning-post-drag");i.hideDropPlaceholder();s.dispatchEvent("dragItemPositioned",null,[i])}i.once("layout",r);this.once("layoutComplete",r);i.moveTo(i.rect.x,i.rect.y);this.layout();this.dragItemCount=Math.max(0,this.dragItemCount-1);this.sortItemsByPosition();i.disablePlacing();this.unstamp(i.element)},r.bindDraggabillyEvents=function(t){this._bindDraggabillyEvents(t,"on")},r.unbindDraggabillyEvents=function(t){this._bindDraggabillyEvents(t,"off")},r._bindDraggabillyEvents=function(t,i){var e=this.handleDraggabilly;t[i]("dragStart",e.dragStart);t[i]("dragMove",e.dragMove);t[i]("dragEnd",e.dragEnd)},r.bindUIDraggableEvents=function(t){this._bindUIDraggableEvents(t,"on")},r.unbindUIDraggableEvents=function(t){this._bindUIDraggableEvents(t,"off")},r._bindUIDraggableEvents=function(t,i){var e=this.handleUIDraggable;t[i]("dragstart",e.start)[i]("drag",e.drag)[i]("dragstop",e.stop)};var c=r.destroy;return r.destroy=function(){c.apply(this,arguments),this.isEnabled=!1},s.Rect=f,s.Packer=i,s}(t.getSize,t.Outlayer,t.Packery.Rect,t.Packery.Packer,t.Packery.Item)}(window),function(t){!function(t,i){var e=t.create("packery"),s=e.prototype,r={_getElementOffset:true,_getMeasurement:true};for(var h in i.prototype){if(!r[h]){s[h]=i.prototype[h]}}var n=s._resetLayout;s._resetLayout=function(){this.packer=this.packer||new i.Packer;this.shiftPacker=this.shiftPacker||new i.Packer;n.apply(this,arguments)};var a=s._getItemLayoutPosition;s._getItemLayoutPosition=function(t){t.rect=t.rect||new i.Rect;return a.call(this,t)};var o=s.needsResizeLayout;s.needsResizeLayout=function(){if(this._getOption("horizontal")){return this.needsVerticalResizeLayout()}else{return o.call(this)}};var c=s._getOption;s._getOption=function(t){return"horizontal"==t?void 0!==this.options.isHorizontal?this.options.isHorizontal:this.options.horizontal:c.apply(this.isotope,arguments)}}(t.ModulaIsotope.LayoutMode,t.Packery)}(window);